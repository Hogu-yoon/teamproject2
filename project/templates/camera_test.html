<!DOCTYPE html>
    <html lang="en">

    <head>
        <meta charset="UTF-8">
        <title>Title</title>
    </head>

    <body>
        <video id="video" width="640" height="480" autoplay></video>
        <canvas id="canvas" width="300" height="300"></canvas>
    </body>

<!--    <script src="https://code.jquery.com/jquery-3.6.0.min.js"-->
<!--        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="        crossorigin="anonymous"></script>-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
            integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
        var video = document.getElementById('video');
        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
            navigator.mediaDevices.getUserMedia({ video: true }).then(function     (stream) {
                 //video.src = window.URL.createObjectURL(stream);
                video.srcObject = stream;
                console.log(stream)
                video.play();
            });
    }

    setInterval(myTimer, 5000);

    function myTimer() {
        var canvas = document.getElementById('canvas');
        var ctx = canvas.getContext('2d');
        var video = document.getElementById('video');
        ctx.drawImage(video,0,0)
        ctx.translate(video,0)
        document.getElementById("canvas").style = "display:none;"
        //ctx.drawImage(canvas,0,0)
        data = canvas.toDataURL("image/JPEG");

        console.log(data)
        $.ajax({
            type: "POST",
            url: "/camera_test",
            data: {'data':data},
            // dataType : 'JSON',
            // contentType: false,
            // processData: false,
            success: function (response) {
                console.log(response)
                // if (data.success) {
                //     //alert('Your file was successfully uploaded!');
                // } else {
                //    // alert('There was an error uploading your file!');
                // }
            },
            error: function (response) {
                console.log('There was an error uploading your file!');
            }
        }).done(function () {
            console.log("Sent");
        });


    }

</script>

</html>